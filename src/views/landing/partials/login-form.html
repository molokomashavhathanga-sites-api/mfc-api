<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>login</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="/assets/landing/css/styles.css" />
    <script src="https://kit.fontawesome.com/e6d1f98a15.js" crossorigin="anonymous"></script>


  </head>

  <body>
    <main class="container py-5">
      <div class="auth-wrap mx-auto">
        <div class="text-center mb-4">
          <div class="d-inline-flex align-items-center justify-content-center rounded-circle mb-3"
               style="width:56px;height:56px;background:#0d6efd2e;border:1px solid #0d6efd59;">
            <span class="fw-bold text-white">MFC</span>
          </div>
          <h1 class="h3 text-white mb-1">Login</h1>
          <p class="muted mb-0">Manage your account with ease</p>
        </div>

        <div class="card glass-card shadow-lg rounded-4">
          <div class="card-body p-4 p-md-5">
            <form class="needs-validation" novalidate action="/logged-in" method="POST">
              <div class="row g-3">
                <div class="col-12">
                  <div class="form-floating">
                    <input
                    name="email"
                      type="email"
                      class="form-control"
                      id="email"
                      placeholder="name@example.com"
                      required
                    />
                    <label for="email">Email address</label>
                  </div>
                </div>
                <div class="col-12">
                  <div class="form-floating input-group">
                    <input
                    name="password"
                      type="password"
                      class="form-control"
                      id="password"
                      placeholder="Password"
                      minlength="8"
                      required
                    />
                    <label for="password">Password</label>
                    <button class="btn btn-outline-light" type="button" id="togglePw">
                      <i class="fa-regular fa-eye"></i>
                    </button>
                  </div>
                </div>
                <div class="col-12 text-end mt-2">
                  <small class="muted">
                      <a class="link-info" href="/forgot-password">Forgot Password</a>
                  </small>
                </div>

                <div class="col-12 d-grid mt-2">
                  <button class="btn btn-primary btn-lg rounded-3" type="submit">
                    Login 
                  </button>
                </div>

                <!-- <div class="col-12">
                  <div class="divider my-2"><small>or</small></div>
                  <div class="d-grid gap-2">
                    <button class="btn btn-outline-light rounded-3" type="button">
                      Continue with Google
                    </button>
                    <button class="btn btn-outline-light rounded-3" type="button">
                      Continue with Apple
                    </button>
                  </div>
                </div> -->

                <div class="col-12 text-center mt-2">
                  <small class="muted">
                    Don't have an account?
                    <a class="link-info" href="/signup">Sign Up</a>
                  </small>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </main>

    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
  // Run after DOM is ready (prevents nulls when scripts load early)
  document.addEventListener("DOMContentLoaded", () => {

    // Bootstrap validation + optional confirm-password check
    (() => {
      const forms = document.querySelectorAll(".needs-validation");
      Array.from(forms).forEach((form) => {
        form.addEventListener("submit", (event) => {
          const pw = document.getElementById("password");
          const cpw = document.getElementById("confirmPassword");
          const confirmFeedback = document.getElementById("confirmFeedback");

          // Only run confirm-password logic if those fields exist (signup page)
          if (pw && cpw && confirmFeedback) {
            if (cpw.value !== pw.value) {
              cpw.setCustomValidity("Passwords do not match");
              confirmFeedback.textContent = "Passwords do not match.";
            } else {
              cpw.setCustomValidity("");
              confirmFeedback.textContent = "Please confirm your password.";
            }
          }

          if (!form.checkValidity()) {
            event.preventDefault();
            event.stopPropagation();
          }
          form.classList.add("was-validated");
        }, false);
      });
    })();

    // Password toggle (safe)
    function setupToggle(inputId, btnId) {
      const input = document.getElementById(inputId);
      const btn = document.getElementById(btnId);

      // If either element isn't on this page, do nothing
      if (!input || !btn) return;

      btn.addEventListener("click", () => {
        const isPw = input.type === "password";
        input.type = isPw ? "text" : "password";
        btn.textContent = isPw ? "Hide" : "ðŸ‘";
      });
    }

    setupToggle("password", "togglePw");
    setupToggle("confirmPassword", "togglePw2");

    // Password strength meter (safe)
    const pw = document.getElementById("password");
    const bar = document.getElementById("pwBar");
    const hint = document.getElementById("pwHint");

    if (pw && bar && hint) {
      pw.addEventListener("input", () => {
        const v = pw.value;
        let score = 0;
        if (v.length >= 8) score++;
        if (/[A-Z]/.test(v)) score++;
        if (/[a-z]/.test(v)) score++;
        if (/[0-9]/.test(v)) score++;
        if (/[^A-Za-z0-9]/.test(v)) score++;

        const pct = (score / 5) * 100;
        bar.style.width = pct + "%";

        if (pct < 40) hint.textContent = "Weak: add length + numbers.";
        else if (pct < 80) hint.textContent = "Good: try adding symbols or uppercase.";
        else hint.textContent = "Strong password.";
      });
    }

  });
</script>
  </body>
</html>
